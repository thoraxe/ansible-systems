# vim: set ft=ansible:
---
- name: RPMFusion repositories
  hosts: localhost
  tags:
    - rpmfusion
  tasks:
    - name: Install packages
      dnf:
        name: "{{ item }}"
        state: present
      with_items:
        - "http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ ansible_distribution_version }}.noarch.rpm"
        - "http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ ansible_distribution_version }}.noarch.rpm"

- name: Browser and base
  hosts: localhost
  tags:
    - browser_and_base
  tasks:
  - name: Set up Chrome repository
    yum_repository:
      name: google-chrome
      description: google-chrome
      baseurl: "http://dl.google.com/linux/chrome/rpm/stable/x86_64"
      enabled: yes
      gpgcheck: yes
      gpgkey: "https://dl.google.com/linux/linux_signing_key.pub"
  - name: Install packages
    dnf:
      name: "{{ item }}"
      state: present
    with_items:
      - "google-chrome-stable"
      - "https://www.dropbox.com/download?dl=packages/fedora/nautilus-dropbox-2015.10.28-1.fedora.x86_64.rpm"
      - "htop"
      - "gnome-tweak-tool"
      - "workrave"
      - "workrave-gtk2"
      - "filezilla"
      - "thunderbird"
      - "redshift"
      - "pidgin"
      - "gparted"
      - "tmux"
      - "powerline"
      - "powerline-fonts"
      - "tmux-powerline"
      - "vim-powerline"
      - "vim-enhanced"
      - "vim-X11"
  - name: Disable wayland for workrave
    lineinfile:
      dest: /etc/gdm/custom.conf
      regexp: "^#WaylandEnable"
      line: "WaylandEnable=false"
      state: present
  - name: inotify watches for DropBox
    lineinfile:
      dest: /etc/sysctl.conf
      line: "fs.inotify.max_user_watches = 1000000"
      state: present
      insertafter: EOF

- name: VLC and codecs
  hosts: localhost
  tags:
    - vlc_and_codecs
  tasks:
    - name: Install packages
      dnf:
        name: "{{ item }}"
        state: present
      with_items:
        - "gstreamer-plugins-bad"
        - "gstreamer-plugins-bad-free"
        - "gstreamer-plugins-bad-free-extras"
        - "gstreamer-plugins-bad-nonfree"
        - "gstreamer-plugins-good"
        - "gstreamer-plugins-good-extras"
        - "gstreamer-plugins-ugly"
        - "gstreamer1-plugins-bad-free"
        - "gstreamer1-plugins-bad-free-extras"
        - "gstreamer1-plugins-good"
        - "gstreamer1-plugins-good-extras"
        - "gstreamer1-plugins-ugly"
        - "vlc"

- name: Graphic design, photo editing, video
  hosts: localhost
  tags:
    - graphic_design_and_photo_editing
  tasks:
    - name: Install packages
      dnf:
        name: "{{ item }}"
        state: present
      with_items:
        - "darktable"
        - "gimp"
        - "blender"
        - "geeqie"
        - "LibRaw"

- name: Java and WebEx support
  hosts: localhost
  tags:
    - java_and_webex_support
  tasks:
    - name: Install packages
      dnf:
        name: "{{ item }}"
        state: present
      with_items:
        - "java"
        - "icedtea-web"
        - "cairo.i686" 
        - "pango.i686" 
        - "mesa-libGL.i686" 
        - "pangox-compat.i686" 
        - "mesa-libglapi.i686" 
        - "libXmu.i686" 
        - "mesa-libEGL.i686" 
        - "gtk2.i686" 
        - "libpng.i686" 
        - "alsa-lib.i686" 
        - "libXtst.i686" 
        - "libart_lgpl.i686"

- name: Flash plugin
  hosts: localhost
  tags:
    - flash_plugin
  tasks:
    - name: Install Flash repository
      dnf:
        name: "https://fpdownload.adobe.com/pub/flashplayer/pdc/24.0.0.221/flash-player-npapi-24.0.0.221-release.x86_64.rpm"
        state: present
    - name: Install Flash plugin
      dnf:
        name: "flash-plugin"
        state: present
